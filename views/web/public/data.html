<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.5.0/css/all.css' integrity='sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU' crossorigin='anonymous'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<title>Search Results</title>

	<style>
	table {
	  font-family: arial, sans-serif;
	  border-collapse: collapse;
	  width: 100%;
	}
	
	td, th {
	  border: 1px solid #dddddd;
	  text-align: center;
	  padding: 8px;
	}

	th {
	  font-style: italic;
	}
/*
	tr:nth-child(even) {
	  background-color: #dddddd;
	}*/
	</style>

</head>
<body>

	<div class="container">
		<br>
		<center>

		<ul class="nav justify-content-center">
		  <li class="nav-item">
		    <a class="nav-link btn btn-light" href="/">Home</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link btn btn-light" href="/search">Search</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link btn btn-dark disabled" href="#">Search Results</a>
		  </li>
		</ul>

		<br>

		<div id="searchInfo" class="alert alert-info">
			<strong>No</strong> results found!
		</div>

		<a href="/search"><button class="btn btn-primary" style="font-size:24px"><i class="fas fa-arrow-left"></i> New Search</button></a>
		<br><br>

		<div id="resultsBox">--- retrieving data ---</div>

		<br><br>

		</center>
	</div>

</body>

	<script type="text/javascript">
		
		var roomData = "<%= roomData %>";

		roomData = JSON.stringify(roomData);
    	roomData = JSON.parse(roomData);
    	roomData = roomData.replace(new RegExp("&quot;", 'g'), "\"");
    	roomData = JSON.parse(roomData);

		var html = "<tr> <th>Name</th> <th>Room No</th> <th>Hostel</th> <th>Contact Number</th> <th></th> <th></th></tr>";

		for (var i = 0; i < roomData.length; i++) {
			curr = roomData[i];
			html += ("<tr> <td>" + curr['value']['studentName'] + "</td> <td>" + curr['value']['roomNumber'] + "</td> <td>" + curr['value']['hostelName'] + "</td> <td>" + curr['value']['contactNumber'] + "</td> <td><a href='/swap/request/" + curr['value']['hostelName'] + "/" + curr['value']['roomNumber'] + "/" + curr['key'] + "''>Swap</a>" + "</td> <td><a href='/details/" + curr['value']['hostelName'] + "/" + curr['value']['roomNumber'] + "/" + curr['key'] + "''>View More</a></td> </tr>");
		}

		html = "<div class='table-responsive'><table class='table'>" + html + "</table></div>";

		document.getElementById("resultsBox").innerHTML = html;
		var searchInfo = "You have searched for <strong>" + roomData[0]['value']['roomNumber'] + ", " + roomData[0]['value']['hostelName'] + "</strong>. Found <strong>" + (roomData.length) + "</strong> result(s)!";
		document.getElementById("searchInfo").innerHTML = searchInfo;

	</script>

</html>